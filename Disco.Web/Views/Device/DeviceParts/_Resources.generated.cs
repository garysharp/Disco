#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Disco.Web.Views.Device.DeviceParts
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using Disco;
    using Disco.Models.Repository;
    using Disco.Services;
    using Disco.Services.Authorization;
    using Disco.Services.Web;
    using Disco.Web;
    using Disco.Web.Extensions;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Device/DeviceParts/_Resources.cshtml")]
    public partial class _Resources : Disco.Services.Web.WebViewPage<Disco.Web.Models.Device.ShowModel>
    {
        public _Resources()
        {
        }
        public override void Execute()
        {
            
            #line 2 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
  
    Authorization.Require(Claims.Device.ShowAttachments);

    var canAddAttachments = Authorization.Has(Claims.Device.Actions.AddAttachments);
    var canRemoveAnyAttachments = Authorization.Has(Claims.Device.Actions.RemoveAnyAttachments);
    var canRemoveOwnAttachments = Authorization.Has(Claims.Device.Actions.RemoveOwnAttachments);

    Html.BundleDeferred("~/Style/Shadowbox");
    Html.BundleDeferred("~/ClientScripts/Modules/Shadowbox");

    if (canAddAttachments)
    {
        Html.BundleDeferred("~/ClientScripts/Modules/Disco-AttachmentUploader");
    }

            
            #line default
            #line hidden
WriteLiteral("\r\n<div");

WriteLiteral(" id=\"DeviceDetailTab-Resources\"");

WriteLiteral(" class=\"DevicePart\"");

WriteLiteral(">\r\n    <table");

WriteLiteral(" id=\"deviceShowResources\"");

WriteLiteral(">\r\n        <tr>\r\n            <td");

WriteLiteral(" id=\"AttachmentsContainer\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"Attachments\"");

WriteAttribute("class", Tuple.Create(" class=\"", 820), Tuple.Create("\"", 1067)
            
            #line 21 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
, Tuple.Create(Tuple.Create("", 828), Tuple.Create<System.Object, System.Int32>(canAddAttachments ? "canAddAttachments" : "cannotAddAttachments"
            
            #line default
            #line hidden
, 828), false)
            
            #line 21 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                  , Tuple.Create(Tuple.Create(" ", 895), Tuple.Create<System.Object, System.Int32>(canRemoveAnyAttachments ? "canRemoveAnyAttachments" : "cannotRemoveAnyAttachments"
            
            #line default
            #line hidden
, 896), false)
            
            #line 21 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                                        , Tuple.Create(Tuple.Create(" ", 981), Tuple.Create<System.Object, System.Int32>(canRemoveOwnAttachments ? "canRemoveOwnAttachments" : "cannotRemoveOwnAttachments"
            
            #line default
            #line hidden
, 982), false)
);

WriteLiteral(" data-userid=\"");

            
            #line 21 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                                                                                                                                                                                                                      Write(CurrentUser.UserId);

            
            #line default
            #line hidden
WriteLiteral("\"");

WriteLiteral(" data-uploadurl=\"");

            
            #line 21 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                                                                                                                                                                                                                                                            Write(Url.Action(MVC.API.Device.AttachmentUpload(Model.Device.SerialNumber, null)));

            
            #line default
            #line hidden
WriteLiteral("\"");

WriteLiteral(" data-onlineuploadurl=\"");

            
            #line 21 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                                                                                                                                                                                                                                                                                                                                                                   Write(Url.Action(MVC.API.Device.AttachmentOnlineUploadSession(Model.Device.SerialNumber)));

            
            #line default
            #line hidden
WriteLiteral("\"");

WriteLiteral(" data-qrcodeurl=\"");

            
            #line 21 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Write(Url.Content("~/ClientSource/Scripts/Modules/qrcode.min.js"));

            
            #line default
            #line hidden
WriteLiteral("\"");

WriteLiteral(" data-removeurl=\"");

            
            #line 21 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Write(Url.Action(MVC.API.Device.AttachmentRemove()));

            
            #line default
            #line hidden
WriteLiteral("\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"Disco-AttachmentUpload-DropTarget\"");

WriteLiteral(">\r\n                        <h2>Drop Attachments Here</h2>\r\n                    </" +
"div>\r\n                    <div");

WriteLiteral(" class=\"attachmentOutput\"");

WriteLiteral(">\r\n");

            
            #line 26 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                        
            
            #line default
            #line hidden
            
            #line 26 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                         if (Model.Device.DeviceAttachments != null)
                        {
                            foreach (var da in Model.Device.DeviceAttachments.OrderByDescending(a => a.Id))
                            {

            
            #line default
            #line hidden
WriteLiteral("                                <a");

WriteAttribute("href", Tuple.Create(" href=\"", 1930), Tuple.Create("\"", 1990)
            
            #line 30 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
, Tuple.Create(Tuple.Create("", 1937), Tuple.Create<System.Object, System.Int32>(Url.Action(MVC.API.Device.AttachmentDownload(da.Id))
            
            #line default
            #line hidden
, 1937), false)
);

WriteLiteral(" data-attachmentid=\"");

            
            #line 30 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                              Write(da.Id);

            
            #line default
            #line hidden
WriteLiteral("\"");

WriteLiteral(" data-mimetype=\"");

            
            #line 30 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                                                     Write(da.MimeType);

            
            #line default
            #line hidden
WriteLiteral("\"");

WriteLiteral(">\r\n                                    <span");

WriteLiteral(" class=\"icon\"");

WriteAttribute("title", Tuple.Create(" title=\"", 2104), Tuple.Create("\"", 2124)
            
            #line 31 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
, Tuple.Create(Tuple.Create("", 2112), Tuple.Create<System.Object, System.Int32>(da.Filename
            
            #line default
            #line hidden
, 2112), false)
);

WriteLiteral(">\r\n                                        <img");

WriteLiteral(" alt=\"Attachment Thumbnail\"");

WriteAttribute("src", Tuple.Create(" src=\"", 2199), Tuple.Create("\"", 2261)
            
            #line 32 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
, Tuple.Create(Tuple.Create("", 2205), Tuple.Create<System.Object, System.Int32>(Url.Action(MVC.API.Device.AttachmentThumbnail(da.Id))
            
            #line default
            #line hidden
, 2205), false)
);

WriteLiteral(" />\r\n                                    </span>\r\n                               " +
"     <span");

WriteLiteral(" class=\"comments\"");

WriteAttribute("title", Tuple.Create(" title=\"", 2370), Tuple.Create("\"", 2407)
            
            #line 34 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
, Tuple.Create(Tuple.Create("", 2378), Tuple.Create<System.Object, System.Int32>(da.Comments ?? da.Filename
            
            #line default
            #line hidden
, 2378), false)
);

WriteLiteral(">\r\n");

            
            #line 35 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                        
            
            #line default
            #line hidden
            
            #line 35 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                          if (!string.IsNullOrEmpty(da.DocumentTemplateId))
                                            { 
            
            #line default
            #line hidden
            
            #line 36 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                         Write(da.DocumentTemplate.Description);

            
            #line default
            #line hidden
            
            #line 36 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                              }
                                        else
                                        { 
            
            #line default
            #line hidden
            
            #line 38 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                      Write(da.Comments ?? da.Filename);

            
            #line default
            #line hidden
            
            #line 38 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                        }
            
            #line default
            #line hidden
WriteLiteral("\r\n                                    </span><span");

WriteLiteral(" class=\"author\"");

WriteLiteral(">");

            
            #line 39 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                           Write(da.TechUser.ToString());

            
            #line default
            #line hidden
WriteLiteral("</span>");

            
            #line 39 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                               if (canRemoveAnyAttachments || (canRemoveOwnAttachments && da.TechUserId.Equals(CurrentUser.UserId, StringComparison.OrdinalIgnoreCase)))
                                    {
            
            #line default
            #line hidden
WriteLiteral("<span");

WriteLiteral(" class=\"remove fa fa-times-circle\"");

WriteLiteral("></span>");

            
            #line 40 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                 }
            
            #line default
            #line hidden
WriteLiteral("<span");

WriteLiteral(" class=\"timestamp\"");

WriteAttribute("title", Tuple.Create(" title=\"", 3062), Tuple.Create("\"", 3100)
            
            #line 40 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                 , Tuple.Create(Tuple.Create("", 3070), Tuple.Create<System.Object, System.Int32>(da.Timestamp.ToFullDateTime()
            
            #line default
            #line hidden
, 3070), false)
);

WriteLiteral(" data-livestamp=\"");

            
            #line 40 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                                                                                            Write(da.Timestamp.ToUnixEpoc());

            
            #line default
            #line hidden
WriteLiteral("\"");

WriteLiteral(">");

            
            #line 40 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                                                                                                                        Write(da.Timestamp.ToFullDateTime());

            
            #line default
            #line hidden
WriteLiteral("</span>\r\n                                </a>\r\n");

            
            #line 42 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                            }
                        }

            
            #line default
            #line hidden
WriteLiteral("                    </div>\r\n");

            
            #line 45 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                    
            
            #line default
            #line hidden
            
            #line 45 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                     if (canAddAttachments)
                    {

            
            #line default
            #line hidden
WriteLiteral("                        <div");

WriteLiteral(" class=\"Disco-AttachmentUpload-Progress\"");

WriteLiteral("></div>\r\n");

WriteLiteral("                        <div");

WriteLiteral(" class=\"attachmentInput clearfix\"");

WriteLiteral(">\r\n                            <span");

WriteLiteral(" class=\"action enabled upload fa fa-upload disabled\"");

WriteLiteral(" title=\"Attach File\"");

WriteLiteral("></span><span");

WriteLiteral(" class=\"action enabled photo fa fa-camera disabled\"");

WriteLiteral(" title=\"Capture Image\"");

WriteLiteral("></span><span");

WriteLiteral(" class=\"action enabled online-upload fa fa-qrcode disabled\"");

WriteLiteral(" title=\"Upload with Online Services\"");

WriteLiteral("></span>\r\n                        </div>\r\n");

            
            #line 51 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                    }

            
            #line default
            #line hidden
WriteLiteral("                    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(@">
                        Shadowbox.init({
                            skipSetup: true,
                            modal: true
                        });
                        $(function () {
                            const $Attachments = $('#Attachments');
                            const $attachmentOutput = $Attachments.find('.attachmentOutput');
                            let $attachmentDownloadHost = null;
                            let $dialogRemoveAttachment = null;
                            let attachmentUploader = null;

                            function onAttachmentAdded(id, quick) {
                                var data = { id: id };
                                $.ajax({
                                    url: '");

            
            #line 67 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                     Write(Url.Action(MVC.API.Device.Attachment()));

            
            #line default
            #line hidden
WriteLiteral("\',\r\n                                    dataType: \'json\',\r\n                      " +
"              data: data,\r\n                                    success: function" +
" (d) {\r\n                                        if (d.Result == \'OK\') {\r\n       " +
"                                     var a = d.Attachment;\r\n\r\n                  " +
"                          if ($Attachments.hasClass(\'canRemoveAnyAttachments\'))\r" +
"\n                                                buildAttachment(a, true, quick)" +
";\r\n                                            else if ($Attachments.hasClass(\'c" +
"anRemoveOwnAttachments\'))\r\n                                                build" +
"Attachment(a, (a.AuthorId === $Attachments.attr(\'data-userid\')), quick);\r\n      " +
"                                      else\r\n                                    " +
"            buildAttachment(a, false, quick);\r\n\r\n                               " +
"             if (attachmentUploader && attachmentUploader.onlineUploadCloseDialo" +
"g) {\r\n                                                attachmentUploader.onlineU" +
"ploadCloseDialog();\r\n                                            }\r\n            " +
"                            } else {\r\n                                          " +
"  alert(\'Unable to add attachment: \' + d.Result);\r\n                             " +
"           }\r\n                                    },\r\n                          " +
"          error: function (jqXHR, textStatus, errorThrown) {\r\n                  " +
"                      alert(\'Unable to add attachment: \' + textStatus);\r\n       " +
"                             }\r\n                                });\r\n           " +
"                 }\r\n\r\n                            function buildAttachment(a, ca" +
"nRemove, quick) {\r\n                                var t = \'<a><span class=\"icon" +
"\"><img alt=\"Attachment Thumbnail\" /></span><span class=\"comments\"></span><span c" +
"lass=\"author\"></span>\';\r\n                                if (canRemove)\r\n       " +
"                             t += \'<span class=\"remove fa fa-times-circle\"></spa" +
"n>\';\r\n                                t += \'<span class=\"timestamp\"></span></a>\'" +
";\r\n\r\n                                var e = $(t);\r\n\r\n                          " +
"      e.attr(\'data-attachmentid\', a.Id).attr(\'data-mimetype\', a.MimeType).attr(\'" +
"href\', \'");

            
            #line 102 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                              Write(Url.Action(MVC.API.Device.AttachmentDownload()));

            
            #line default
            #line hidden
WriteLiteral(@"/' + a.Id);
                                e.find('.comments').text(a.Description);
                                e.find('.author').text(a.Author);
                                e.find('.timestamp').text(a.TimestampFull).attr('title', a.TimestampFull).livestamp(a.TimestampUnixEpoc);
                                if (canRemove)
                                    e.find('.remove').click(removeAttachment);
                                if (!quick)
                                    e.hide();
                                $attachmentOutput.prepend(e);
                                onUpdate();
                                if (!quick)
                                    e.show('slow');
                                if (a.MimeType.toLowerCase().indexOf('image/') == 0)
                                    e.shadowbox({ gallery: 'attachments', player: 'img', title: a.Description });
                                else
                                    e.click(onDownload);

                                // Add Thumbnail
                                var buildThumbnail = function () {
                                    var retryCount = 0;
                                    var img = e.find('.icon img');

                                    var setThumbnailUrl = function () {
                                        img.attr('src', '");

            
            #line 125 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                     Write(Url.Action(MVC.API.Device.AttachmentThumbnail()));

            
            #line default
            #line hidden
WriteLiteral("/\' + a.Id + \'?v=\' + retryCount);\r\n                                    };\r\n       " +
"                             img.on(\'error\', function () {\r\n                    " +
"                    img.addClass(\'loading\');\r\n                                  " +
"      retryCount++;\r\n                                        if (retryCount < 6)" +
"\r\n                                            window.setTimeout(setThumbnailUrl," +
" retryCount * 250);\r\n                                    });\r\n                  " +
"                  img.on(\'load\', function () {\r\n                                " +
"        img.removeClass(\'loading\');\r\n                                    });\r\n  " +
"                                  window.setTimeout(setThumbnailUrl, 100);\r\n    " +
"                            };\r\n                                buildThumbnail()" +
";\r\n                            }\r\n\r\n                            function onDownl" +
"oad() {\r\n                                var $this = $(this);\r\n                 " +
"               var url = $this.attr(\'href\');\r\n\r\n                                " +
"if ($.connection && $.connection.hub && $.connection.hub.transport &&\r\n         " +
"                           $.connection.hub.transport.name == \'foreverFrame\') {\r" +
"\n                                    // SignalR active with foreverFrame transpo" +
"rt - use popup window\r\n                                    window.open(url, \'_bl" +
"ank\', \'height=150,width=250,location=no,menubar=no,resizable=no,scrollbars=no,st" +
"atus=no,toolbar=no\');\r\n                                } else {\r\n               " +
"                     // use iFrame\r\n                                    if (!$at" +
"tachmentDownloadHost) {\r\n                                        $attachmentDown" +
"loadHost = $(\'<iframe>\')\r\n                                            .attr({ \'s" +
"rc\': url, \'title\': \'Attachment Download Host\' })\r\n                              " +
"              .addClass(\'hidden\')\r\n                                            ." +
"appendTo(\'body\')\r\n                                            .contents();\r\n    " +
"                                } else {\r\n                                      " +
"  $attachmentDownloadHost[0].location.href = url;\r\n                             " +
"       }\r\n                                }\r\n\r\n                                r" +
"eturn false;\r\n                            }\r\n\r\n                            funct" +
"ion onAttachmentRemoved(id) {\r\n                                var a = $attachme" +
"ntOutput.find(\'a[data-attachmentid=\' + id + \']\');\r\n\r\n                           " +
"     a.hide(300).delay(300).queue(function () {\r\n                               " +
"     var $this = $(this);\r\n                                    if ($this.attr(\'d" +
"ata-mimetype\').toLowerCase().indexOf(\'image/\') == 0)\r\n                          " +
"              Shadowbox.removeCache(this);\r\n                                    " +
"$this.find(\'.timestamp\').livestamp(\'destroy\');\r\n                                " +
"    $this.remove();\r\n                                    onUpdate();\r\n          " +
"                      });\r\n                            }\r\n\r\n                    " +
"        function onUpdate() {\r\n                                var attachmentCou" +
"nt = $attachmentOutput.children(\'a\').length;\r\n                                va" +
"r tabHeading = \'Attachments [\' + attachmentCount + \']\';\r\n                       " +
"         $(\'#DeviceDetailTab-ResourcesLink\').text(tabHeading);\r\n                " +
"            }\r\n\r\n                            document.DiscoFunctions.onAttachmen" +
"tAdded = onAttachmentAdded;\r\n                            document.DiscoFunctions" +
".onAttachmentRemoved = onAttachmentRemoved;\r\n\r\n");

            
            #line 187 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                        
            
            #line default
            #line hidden
            
            #line 187 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                         if (canAddAttachments)
                        {
            
            #line default
            #line hidden
WriteLiteral("\r\n                            //#region Add Attachments\r\n                        " +
"    attachmentUploader = new document.Disco.AttachmentUploader($Attachments);\r\n\r" +
"\n                            var $attachmentInput = $Attachments.find(\'.attachme" +
"ntInput\');\r\n                            $attachmentInput.find(\'.online-upload\')." +
"on(\'click\', function () {\r\n                                if ($(this).hasClass(" +
"\'disabled\'))\r\n                                    alert(\'Disconnected from the D" +
"isco ICT Server, please refresh this page and try again\');\r\n                    " +
"            else\r\n                                    attachmentUploader.onlineU" +
"pload();\r\n                            });\r\n                            if (windo" +
"w.location.protocol != \'https:\') {\r\n                                $attachmentI" +
"nput.find(\'.photo\')\r\n                                    .removeClass(\'enabled\')" +
"\r\n                                    .addClass(\'disabled\')\r\n                   " +
"                 .attr(\'title\', \'Capture Image: this functionality is only avail" +
"able over a HTTPS connection\');\r\n                            }\r\n                " +
"            $attachmentInput.find(\'.photo\').click(function () {\r\n               " +
"                 if (!$(this).hasClass(\'enabled\'))\r\n                            " +
"        alert(\'This functionality is only available over a HTTPS connection\');\r\n" +
"                                else if ($(this).hasClass(\'disabled\'))\r\n        " +
"                            alert(\'Disconnected from the Disco ICT Server, pleas" +
"e refresh this page and try again\');\r\n                                else\r\n    " +
"                                attachmentUploader.uploadImage();\r\n             " +
"               });\r\n                            $attachmentInput.find(\'.upload\')" +
".click(function () {\r\n                                if ($(this).hasClass(\'disa" +
"bled\'))\r\n                                    alert(\'Disconnected from the Disco " +
"ICT Server, please refresh this page and try again\');\r\n                         " +
"       else\r\n                                    attachmentUploader.uploadFiles(" +
");\r\n                            });\r\n\r\n                            var resources" +
"Tab;\r\n                            $(document).on(\'dragover\', function () {\r\n    " +
"                            if (!resourcesTab) {\r\n                              " +
"      var tabs = $Attachments.closest(\'.ui-tabs\');\r\n                            " +
"        resourcesTab = {\r\n                                        tabs: tabs,\r\n " +
"                                       resourcesIndex: tabs.children(\'ul.ui-tabs" +
"-nav\').find(\'a[href=\"#DeviceDetailTab-Resources\"]\').closest(\'li\').index()\r\n     " +
"                               };\r\n                                }\r\n          " +
"                      var selectedIndex = resourcesTab.tabs.tabs(\'option\', \'acti" +
"ve\');\r\n                                if (resourcesTab.resourcesIndex !== selec" +
"tedIndex)\r\n                                    resourcesTab.tabs.tabs(\'option\', " +
"\'active\', resourcesTab.resourcesIndex);\r\n                            });\r\n      " +
"                      //#endregion\r\n                            ");

            
            #line 234 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                   }

            
            #line default
            #line hidden
WriteLiteral("                        ");

            
            #line 235 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                         if (canRemoveAnyAttachments || canRemoveOwnAttachments)
                        {
            
            #line default
            #line hidden
WriteLiteral("\r\n                            //#region Remove Attachments\r\n                     " +
"       $attachmentOutput.find(\'span.remove\').click(removeAttachment);\r\n\r\n       " +
"                     function removeAttachment() {\r\n                            " +
"    $this = $(this).closest(\'a\');\r\n\r\n                                if (!$dialo" +
"gRemoveAttachment) {\r\n                                    $dialogRemoveAttachmen" +
"t = $(\'#dialogRemoveAttachment\').dialog({\r\n                                     " +
"   resizable: false,\r\n                                        height: 140,\r\n    " +
"                                    modal: true,\r\n                              " +
"          autoOpen: false\r\n                                    });\r\n            " +
"                    }\r\n\r\n                                async function removeAt" +
"tachmentAsync(id) {\r\n                                    const body = new FormDa" +
"ta();\r\n                                    body.append(\'__RequestVerificationTok" +
"en\', document.body.dataset.antiforgery);\r\n                                    bo" +
"dy.append(\'id\', id);\r\n\r\n                                    try {\r\n             " +
"                           const response = await fetch($Attachments.attr(\'data-" +
"removeurl\'), {\r\n                                            body: body,\r\n       " +
"                                     method: \'POST\'\r\n                           " +
"             });\r\n                                        if (!response.ok) {\r\n " +
"                                           alert(\'Unable to remove attachment: \'" +
" + response.statusText);\r\n                                        }\r\n           " +
"                             $dialogRemoveAttachment.dialog(\"close\");\r\n         " +
"                           } catch (e) {\r\n                                      " +
"  alert(\'Unable to remove attachment: \' + e);\r\n                                 " +
"       $dialogRemoveAttachment.dialog(\"close\");\r\n                               " +
"     }\r\n                                }\r\n\r\n                                con" +
"st attachmentId = $this.attr(\'data-attachmentid\');\r\n                            " +
"    $dialogRemoveAttachment.dialog(\'option\', \'buttons\', {\r\n                     " +
"               \"Remove\": function () {\r\n                                        " +
"$dialogRemoveAttachment.dialog(\"option\", \"buttons\", null);\r\n                    " +
"                    removeAttachmentAsync(attachmentId);\r\n                      " +
"              },\r\n                                    Cancel: function () {\r\n   " +
"                                     $dialogRemoveAttachment.dialog(\"close\");\r\n " +
"                                   }\r\n                                }).dialog(" +
"\'open\');\r\n\r\n                                return false;\r\n                     " +
"       }\r\n                            //#endregion\r\n                        ");

            
            #line 286 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                               }

            
            #line default
            #line hidden
WriteLiteral(@"
                            $attachmentOutput.children('a').each(function () {
                                $this = $(this);
                                if ($this.attr('data-mimetype').toLowerCase().indexOf('image/') == 0)
                                    $this.shadowbox({ gallery: 'attachments', player: 'img', title: $this.find('.comments').text() });
                                else
                                    $this.click(onDownload);
                            });
                        });
                    </script>
                </div>
            </td>
        </tr>
    </table>
    <div");

WriteLiteral(" id=\"dialogRemoveAttachment\"");

WriteLiteral(" class=\"dialog\"");

WriteLiteral(" title=\"Remove this Attachment?\"");

WriteLiteral(">\r\n        <p>\r\n            <i");

WriteLiteral(" class=\"fa fa-exclamation-triangle fa-lg\"");

WriteLiteral("></i>&nbsp;Are you sure?\r\n        </p>\r\n    </div>\r\n    <script>\r\n        $(\'#Dev" +
"iceDetailTabItems\').append(\'<li><a href=\"#DeviceDetailTab-Resources\" id=\"DeviceD" +
"etailTab-ResourcesLink\">Attachments [");

            
            #line 307 "..\..\Views\Device\DeviceParts\_Resources.cshtml"
                                                                                                                                Write(Model.Device.DeviceAttachments == null ? 0 : Model.Device.DeviceAttachments.Count);

            
            #line default
            #line hidden
WriteLiteral("]</a></li>\');\r\n    </script>\r\n</div>\r\n");

        }
    }
}
#pragma warning restore 1591
